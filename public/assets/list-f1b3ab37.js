import{m as i,j as a,c as f,b as v,n as g,p as h,L as j,T as r,q as b,Q as Y,t as c,ad as N}from"./index-8bd41d8c.js";import{A as O}from"./alert-48c44e81.js";import{D as A}from"./download-292d2d2f.js";import{B as D}from"./block_role-55ad1a6d.js";import{u as E}from"./observation-a1e94fcb.js";import"./useQuery-d0771aa7.js";const o=b(),L=[o.accessor("employee.name",{header:()=>"Empleado",cell:e=>e.getValue(),footer:e=>e.column.id}),o.accessor("observation",{header:()=>"Observacion",cell:e=>e.getValue(),footer:e=>e.column.id}),o.accessor("initDate",{header:()=>"Fecha de ingreso",cell:e=>i(e.getValue()).format("YYYY-MM-DD"),footer:e=>e.column.id}),o.accessor("endDate",{header:()=>"Fecha de salida",cell:e=>i(e.getValue()).format("YYYY-MM-DD"),footer:e=>e.column.id}),o.accessor("isApproved",{header:()=>"Estado",cell:e=>a.jsx("div",{className:"max-w-[100px] flex items-center justify-center mx-auto",children:a.jsx(f.Chip,{className:"text-center",size:"sm",color:e.getValue()?"green":"red",value:e.getValue()?"Aprovado":"No aprovado"})}),footer:e=>e.column.id})];function R(){const{observations:e,isLoading:l}=E(),{id:n,closeAlert:d,user:s}=v(t=>t),m=g(),u=D.includes((s==null?void 0:s.role)||""),{mutate:p,isLoading:x}=h(()=>N.deleteObservation(n),{onSuccess:()=>{d(),m.invalidateQueries([Y.OBSERVATION]),c("Observacion eliminada de forma exitosa",null)},onError:t=>{c(`opps! algo no va bien ${t}`,"error")}});return l||x?a.jsx(j,{}):a.jsxs("div",{className:"relative",children:[(s==null?void 0:s.role)==="ADMIN"&&a.jsx("div",{className:"absolute z-20 right-[230px] -top-12",children:a.jsx(A,{data:(e==null?void 0:e.results)||[],fileName:"observaciones"})}),a.jsxs(r,{data:(e==null?void 0:e.results)||[],columns:L,showActions:!u,children:[a.jsx(r.RowHeader,{}),a.jsx(r.Body,{})]}),a.jsx(O,{acction:p,title:"Seguro que desea realizar esta acccion?",description:"esta accion no es revercible"})]})}export{R as default};
