import{p as b,q as x,t as y,g as h,r as l,e as R,i as u,h as v,v as E,j as c,f as j,I as C,a as S,w as V}from"./index-2849c0a5.js";import{Q as L}from"./query-keys-5a8e9e35.js";import{b as k,R as f}from"./role-3d82f1ba.js";const w=b().shape({name:x().required("El nombre es requerido!")}),N={name:""};function q(){const a=y(),m=h(),{role:e,isLoading:d}=k(),o=l.useMemo(()=>({name:(e==null?void 0:e.name)||""}),[e]),t=R(),n=l.useCallback(async r=>{try{await f.editRole(a.id||"",r),u("Cargo actualizado exitosamente",null)}catch(s){u(`opps!! algo no va bien ${s.response.data.message||""}`,"error"),console.error(s)}},[a]),g=l.useCallback(async r=>{try{const s=await f.createRole(r);return u("Cargo creado exitosamente",null),t("/roles"),s}catch(s){u(`opps!! algo no va bien ${s.response.data.message||""}`,"error"),console.error(s)}},[t]),{mutateAsync:p,isLoading:i}=v(a.id?n:g,{onSuccess:()=>{m.invalidateQueries([L.GROUP])}});return{isLoading:d||i,submit:p,formValues:{defaultValues:Object.keys(o).length<0?N:o},status:a.id?"Editar cargo":"Crear cargo",isEditing:!!a.id}}const $=()=>{var i;const{submit:a,isLoading:m,formValues:{defaultValues:e},status:d}=q(),{handleSubmit:o,reset:t,formState:{errors:n},control:g}=E({mode:"all",defaultValues:e,resolver:V(w)});l.useEffect(()=>{t(e)},[t,e]);const p=r=>{a(r)};return m?c.jsx(j,{}):c.jsxs("form",{onSubmit:o(p),className:"bg-white dark:bg-black mt-5 flex flex-col space-y-4",children:[c.jsx(C,{control:g,name:"name",label:"Nombre",errorMessage:((i=n.name)==null?void 0:i.message)||"",error:!!n.name}),c.jsx(S.Button,{type:"submit",className:"mt-10",children:d})]})};export{$ as default};
