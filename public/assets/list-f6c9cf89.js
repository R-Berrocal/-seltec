import{m as n,j as s,b as c,c as E,n as x,p as D,L as Y,Q as j,q as l}from"./index-2d95d8aa.js";import{T as L,c as A}from"./table-51f06c16.js";import{A as M}from"./alert-f3c93674.js";import{B as C}from"./block_role-b3da2c39.js";import{u as S,E as V}from"./employee-1ba529c6.js";import"./useQuery-9ab57199.js";const a=A(),w=[a.accessor("name",{header:()=>"Nombre",cell:e=>`${e.getValue()}`,footer:e=>e.column.id}),a.accessor("identification",{header:()=>"Identificacion",cell:e=>e.getValue(),footer:e=>e.column.id}),a.accessor("observations.initDate",{header:()=>"Fecha de ingreso",cell:e=>e.getValue()?n(e.getValue()||"").format("YYYY-MM-DD"):s.jsx(c.Chip,{color:"red",value:"sin fecha",className:"text-center"}),footer:e=>e.column.id}),a.accessor("observations.endDate",{header:()=>"Fecha de salida",cell:e=>e.getValue()?n(e.getValue()||"").format("YYYY-MM-DD"):s.jsx(c.Chip,{color:"red",value:"sin fecha",className:"text-center"}),footer:e=>e.column.id})];function R(){const{employees:e,isLoading:d}=S(),{id:u,closeAlert:i,user:o}=E(t=>t),m=x(),r=C.includes((o==null?void 0:o.role)||""),{mutate:p,isLoading:f}=D(()=>V.deleteEmployee(u),{onSuccess:()=>{i(),m.invalidateQueries([j.EMPLOYEE]),l("Empleado eliminado de forma exitosa",null)},onError:t=>{i(),l(`opps! algo no va bien ${t}`,"error")}});return d||f?s.jsx(Y,{}):s.jsxs("div",{className:"",children:[s.jsx(L,{total:(e==null?void 0:e.count)||0,columns:w,data:(e==null?void 0:e.results.map(t=>{const g=(t.observations||[]).sort((h,b)=>{const v=new Date(h.createdAt);return new Date(b.createdAt).getTime()-v.getTime()})[0]||{initDate:0,endDate:0,id:0};return{...t,observations:g}}))||[],showActions:!r,showDelete:!r,showUpdate:!r}),s.jsx(M,{acction:p,title:"Seguro que desea realizar esta acccion?",description:"esta accion no es revercible"})]})}export{R as default};
