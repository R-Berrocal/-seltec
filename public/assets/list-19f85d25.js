import{m as j,j as s,c as i,b as h,n as A,p as f,L,T as r,q as y,Q as N,t as n}from"./index-00a53ffa.js";import{A as Y}from"./alert-cd0f6524.js";import{B as C}from"./block_role-55ad1a6d.js";import{u as D,E as M}from"./employee-2f5f3e0b.js";import"./useQuery-400e87ec.js";const a=y(),O=[a.accessor("name",{header:()=>"Nombre",cell:e=>`${e.getValue()}`,footer:e=>e.column.id}),a.accessor("identification",{header:()=>"Identificacion",cell:e=>e.getValue(),footer:e=>e.column.id}),a.accessor("observations.endDate",{header:()=>"Fecha de salida",cell:e=>e.getValue()?j(e.getValue()||"").format("YYYY-MM-DD"):s.jsx(i.Chip,{color:"red",value:"sin fecha",className:"text-center"}),footer:e=>e.column.id}),a.accessor("observations.isApproved",{header:()=>"Estado",cell:e=>s.jsx("div",{className:"max-w-[100px] flex items-center justify-center mx-auto",children:s.jsx(i.Chip,{className:"text-center",size:"sm",color:e!=null&&e.getValue()?"green":"red",value:e!=null&&e.getValue()?"Aprovado":"No aprovado"})}),footer:e=>e.column.id})];function q(){const{employees:e,isLoading:l}=D(),{id:d,closeAlert:c,user:o}=h(t=>t),u=A(),m=C.includes((o==null?void 0:o.role)||""),{mutate:p,isLoading:x}=f(()=>M.deleteEmployee(d),{onSuccess:()=>{c(),u.invalidateQueries([N.EMPLOYEE]),n("Empleado eliminado de forma exitosa",null)},onError:t=>{c(),n(`opps! algo no va bien ${t}`,"error")}});return l||x?s.jsx(L,{}):s.jsxs("div",{className:"relative",children:[s.jsxs(r,{columns:O,showActions:!m,data:(e==null?void 0:e.results.map(t=>{const v=(t.observations||[]).sort((g,E)=>{const b=new Date(g.createdAt);return new Date(E.createdAt).getTime()-b.getTime()})[0]||{initDate:0,endDate:0,id:0};return{...t,observations:v}}))||[],children:[s.jsx(r.RowHeader,{}),s.jsx(r.Body,{})]}),s.jsx(Y,{acction:p,title:"Seguro que desea realizar esta acccion?",description:"esta accion no es revercible"})]})}export{q as default};
