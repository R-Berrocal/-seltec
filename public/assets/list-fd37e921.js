import{m as n,j as t,c,b as j,n as D,p as E,L as Y,T as r,q as A,Q as L,t as l}from"./index-147be8e0.js";import{A as M}from"./alert-7f577afc.js";import{D as N}from"./download-06bde357.js";import{B as C}from"./block_role-55ad1a6d.js";import{u as B,E as O}from"./employee-75ad9128.js";import"./useQuery-2739f2d7.js";const o=A(),S=[o.accessor("name",{header:()=>"Nombre",cell:e=>`${e.getValue()}`,footer:e=>e.column.id}),o.accessor("identification",{header:()=>"Identificacion",cell:e=>e.getValue(),footer:e=>e.column.id}),o.accessor("observations.initDate",{header:()=>"Fecha de ingreso",cell:e=>e.getValue()?n(e.getValue()||"").format("YYYY-MM-DD"):t.jsx(c.Chip,{color:"red",value:"sin fecha",className:"text-center"}),footer:e=>e.column.id}),o.accessor("observations.endDate",{header:()=>"Fecha de salida",cell:e=>e.getValue()?n(e.getValue()||"").format("YYYY-MM-DD"):t.jsx(c.Chip,{color:"red",value:"sin fecha",className:"text-center"}),footer:e=>e.column.id})];function P(){const{employees:e,isLoading:d}=B(),{id:u,closeAlert:i,user:s}=j(a=>a),m=D(),p=C.includes((s==null?void 0:s.role)||""),{mutate:f,isLoading:x}=E(()=>O.deleteEmployee(u),{onSuccess:()=>{i(),m.invalidateQueries([L.EMPLOYEE]),l("Empleado eliminado de forma exitosa",null)},onError:a=>{i(),l(`opps! algo no va bien ${a}`,"error")}});return d||x?t.jsx(Y,{}):t.jsxs("div",{className:"relative",children:[(s==null?void 0:s.role)==="ADMIN"&&t.jsx("div",{className:"absolute z-20 right-[210px] -top-[74px]",children:t.jsx(N,{data:(e==null?void 0:e.results)||[],fileName:"empleados"})}),t.jsxs(r,{columns:S,showActions:!p,data:(e==null?void 0:e.results.map(a=>{const g=(a.observations||[]).sort((h,v)=>{const b=new Date(h.createdAt);return new Date(v.createdAt).getTime()-b.getTime()})[0]||{initDate:0,endDate:0,id:0};return{...a,observations:g}}))||[],children:[t.jsx(r.RowHeader,{}),t.jsx(r.Body,{})]}),t.jsx(M,{acction:f,title:"Seguro que desea realizar esta acccion?",description:"esta accion no es revercible"})]})}export{P as default};
