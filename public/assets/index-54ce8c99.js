import{r as o,c as N,d as M,e as S,f as y,g as L,h as p,i as k,k as V,o as _,j as a,l as O,I as m,a as P,_ as R}from"./index-bf873136.js";import{P as B,a as I}from"./page-layout-d13f39b8.js";import{Q as $}from"./query-keys-fcccf318.js";import{u as H,C as w}from"./company-78f29cfe.js";function Q({title:r,titleId:l,...e},c){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:c,"aria-labelledby":l},e),r?o.createElement("title",{id:l},r):null,o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 21h16.5M4.5 3h15M5.25 3v18m13.5-18v18M9 6.75h1.5m-1.5 3h1.5m-1.5 3h1.5m3-6H15m-1.5 3H15m-1.5 3H15M9 21v-3.375c0-.621.504-1.125 1.125-1.125h3.75c.621 0 1.125.504 1.125 1.125V21"}))}const q=o.forwardRef(Q),A=q,D=N().shape({name:M().required("El nombre es requerido!")}),F={name:"",legalName:"",address:"",phone:"",email:"",webSite:""};function T(){const r=S(),l=y(),{company:e,isLoading:c}=H(),d=o.useMemo(()=>({name:(e==null?void 0:e.name)||"",legalName:(e==null?void 0:e.legalName)||"",email:(e==null?void 0:e.email)||"",address:(e==null?void 0:e.address)||"",phone:(e==null?void 0:e.phone)||"",webSite:(e==null?void 0:e.webSite)||""}),[e]),u=L(),s=o.useCallback(async i=>{try{await w.editcompany(r.id||"",i),p("Empresa actualizada exitosamente",null)}catch(t){p(`opps!! algo no va bien ${t.response.data.message||""}`,"error"),console.error(t)}},[r]),n=o.useCallback(async i=>{try{const t=await w.createCompany(i);return p("Empresa creada exitosamente",null),u("/companies"),t}catch(t){p(`opps!! algo no va bien ${t.response.data.message||""}`,"error"),console.error(t)}},[u]),{mutateAsync:f,isLoading:g}=k(r.id?s:n,{onSuccess:()=>{l.invalidateQueries([$.COMPANY])}});return{isLoading:c||g,submit:f,formValues:{defaultValues:Object.keys(d).length<0?F:d},status:r.id?"Editar empresa":"Crear empresa",isEditing:!!r.id}}const E=()=>{var g,i,t,b,h,x,j,v;const{submit:r,isLoading:l,formValues:{defaultValues:e},status:c}=T(),{handleSubmit:d,reset:u,formState:{errors:s},control:n}=V({mode:"all",defaultValues:e,resolver:_(D)});o.useEffect(()=>{u(e)},[u,e]);const f=C=>{r(C)};return l?a.jsx(O,{}):a.jsxs("form",{onSubmit:d(f),className:"bg-white dark:bg-black mt-5 flex flex-col space-y-4",children:[a.jsxs("div",{className:"flex gap-4",children:[a.jsx(m,{control:n,name:"name",label:"Nombre",errorMessage:((g=s.name)==null?void 0:g.message)||"",error:!!s.name}),a.jsx(m,{control:n,name:"legalName",label:"Nombre Legal",errorMessage:((i=s.legalName)==null?void 0:i.message)||"",error:!!s.legalName})]}),a.jsxs("div",{className:"flex gap-4",children:[a.jsx(m,{control:n,name:"email",label:"correo electronico",type:"email",errorMessage:((t=s.email)==null?void 0:t.message)||"",error:!!s.email}),a.jsx(m,{control:n,name:"address",label:"Dirección",errorMessage:((b=s.address)==null?void 0:b.message)||"",error:!!s.address})]}),a.jsxs("div",{className:"flex gap-4",children:[a.jsx(m,{control:n,name:"phone",label:"Teléfono",errorMessage:((h=s.phone)==null?void 0:h.message)||"",error:!!((x=s.phone)!=null&&x.message)}),a.jsx(m,{control:n,name:"webSite",label:"Sitio Web",errorMessage:((j=s.webSite)==null?void 0:j.message)||"",error:!!((v=s.webSite)!=null&&v.message)})]}),a.jsx(P.Button,{type:"submit",className:"mt-10",children:c})]})},Y=o.lazy(()=>R(()=>import("./list-2a782512.js"),["assets/list-2a782512.js","assets/index-bf873136.js","assets/index-1eb49cdd.css","assets/info-6378c5c4.js","assets/ChevronDownIcon-c25a3013.js","assets/company-78f29cfe.js","assets/query-keys-fcccf318.js"])),z={mainpage:{path:"/",element:a.jsx(Y,{})},routes:[{path:"/edit/:id",element:a.jsx(E,{})},{path:"/create",element:a.jsx(E,{})}]},J=()=>a.jsx(B,{description:"",title:"Empresas",IconButtonCreate:A,children:a.jsx(I,{data:z})});export{J as default};
