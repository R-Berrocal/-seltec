import{r as x,j as s,e as u,u as g,k as v,l as D,v as d,m}from"./index-3bd54e17.js";import{T as O,c as j}from"./table-c4555493.js";import{D as Y,B as y,A as E}from"./block_role-c3fdb52e.js";import{I as L}from"./info-7161dd75.js";import{u as M,a as R,O as S}from"./observation-2985d66f.js";import{Q as A}from"./query-keys-f3f28151.js";const V=()=>{const{observation:e,isLoading:n}=M(),c=x.useMemo(()=>{var l,t,i,o;return[{title:"empleado",value:`${(l=e==null?void 0:e.employee)==null?void 0:l.name} ${(t=e==null?void 0:e.employee)==null?void 0:t.lastName}`},{title:"identificacion",value:(i=e==null?void 0:e.employee)==null?void 0:i.identification},{title:"correo",value:(o=e==null?void 0:e.employee)==null?void 0:o.email},{title:"observacion",value:e==null?void 0:e.observation},{title:"Fecha de ingreso",value:e==null?void 0:e.initDate},{title:"Fecha de salida",value:e==null?void 0:e.endDate}]},[e]);return s.jsx(Y,{title:"InformaciÃ³n de la observacion",children:n?s.jsx(u,{}):s.jsx(L,{data:c})})},r=j();function T(){const{observations:e,isLoading:n}=R(),{idRemove:c,closeAlert:l,user:t}=g(a=>a),i=v(),o=y.includes((t==null?void 0:t.role)||""),{mutate:f,isLoading:p}=D(()=>S.deleteObservation(c),{onSuccess:()=>{l(),i.invalidateQueries([A.OBSERVATION]),m("Observacion eliminada de forma exitosa",null)},onError:a=>{m(`opps! algo no va bien ${a}`,"error")}}),h=[r.accessor("employee.name",{header:()=>"Empleado",cell:a=>a.getValue(),footer:a=>a.column.id}),r.accessor("observation",{header:()=>"Observacion",cell:a=>a.getValue(),footer:a=>a.column.id}),r.accessor("initDate",{header:()=>"Fecha de ingreso",cell:a=>d(a.getValue()).format("YYYY-MM-DD"),footer:a=>a.column.id}),r.accessor("endDate",{header:()=>"Fecha de salida",cell:a=>d(a.getValue()).format("YYYY-MM-DD"),footer:a=>a.column.id})];return n||p?s.jsx(u,{}):s.jsxs("div",{children:[s.jsx(O,{columns:h,data:(e==null?void 0:e.results)||[],showDelete:!o,showUpdate:!o}),s.jsx(V,{}),s.jsx(E,{handleRemove:f})]})}export{T as default};
