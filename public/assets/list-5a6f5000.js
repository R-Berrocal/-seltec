import{r as h,j as l,e as n,u as f,k as x,l as V,m as c}from"./index-bbfb2b48.js";import{T as A,c as j}from"./table-f506fd45.js";import{D as y,B as E,A as S}from"./block_role-49218549.js";import{Q as L}from"./query-keys-f38cae6f.js";import{I as D}from"./info-6aa01e04.js";import{u as g,a as R,A as b}from"./assigned-vehicle-7a9a7c0d.js";const T=()=>{const{assigned:e,isLoading:a}=g(),s=h.useMemo(()=>[{title:"Dias de servicio",value:e==null?void 0:e.daysService},{title:"Observacion",value:e==null?void 0:e.observations},{title:"Tipo de operacion",value:e==null?void 0:e.operationType},{title:"Vehiculo",value:e==null?void 0:e.vehicle.model},{title:"Empleado",value:`${e==null?void 0:e.employee.name} ${e==null?void 0:e.employee.lastName}`}],[e]);return l.jsx(y,{title:"InformaciÃ³n de la assignacion",children:a?l.jsx(n,{}):l.jsx(D,{data:s})})},t=j();function O(){const{assigneds:e,isLoading:a}=R(),{idRemove:s,closeAlert:u,user:r}=f(o=>o),m=x(),i=E.includes((r==null?void 0:r.role)||""),{mutate:d,isLoading:p}=V(()=>b.deleteAssignedVehicle(s),{onSuccess:()=>{u(),m.invalidateQueries([L.ASSIGNED]),c("operacion realizada de forma exitosa",null)},onError:o=>{c(`opps! algo no va bien ${o}`,"error")}}),v=[t.accessor("operationType",{header:()=>"Operacion",cell:o=>o.getValue(),footer:o=>o.column.id}),t.accessor("daysService",{header:()=>"Dias de servicios",cell:o=>o.getValue(),footer:o=>o.column.id}),t.accessor("employee",{header:()=>"Empleado",cell:o=>`${o.getValue().name} ${o.getValue().lastName}`,footer:o=>o.column.id}),t.accessor("vehicle.model",{header:()=>"Vehiculo",cell:o=>o.getValue(),footer:o=>o.column.id})];return a||p?l.jsx(n,{}):l.jsxs("div",{children:[l.jsx(A,{columns:v,data:(e==null?void 0:e.results)||[],showDelete:!i,showUpdate:!i}),l.jsx(T,{}),l.jsx(S,{handleRemove:d})]})}export{O as default};
