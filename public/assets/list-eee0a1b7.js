import{m as h,j as s,c,b as E,n as f,p as A,L as N,T as r,q as D,Q as L,t as n}from"./index-8bd41d8c.js";import{A as Y}from"./alert-48c44e81.js";import{D as C}from"./download-292d2d2f.js";import{B as M}from"./block_role-55ad1a6d.js";import{u as w,E as y}from"./employee-8e6cc6a7.js";import"./useQuery-d0771aa7.js";const o=D(),B=[o.accessor("name",{header:()=>"Nombre",cell:e=>`${e.getValue()}`,footer:e=>e.column.id}),o.accessor("identification",{header:()=>"Identificacion",cell:e=>e.getValue(),footer:e=>e.column.id}),o.accessor("observations.endDate",{header:()=>"Fecha de salida",cell:e=>e.getValue()?h(e.getValue()||"").format("YYYY-MM-DD"):s.jsx(c.Chip,{color:"red",value:"sin fecha",className:"text-center"}),footer:e=>e.column.id}),o.accessor("observations.isApproved",{header:()=>"Estado",cell:e=>s.jsx("div",{className:"max-w-[100px] flex items-center justify-center mx-auto",children:s.jsx(c.Chip,{className:"text-center",size:"sm",color:e!=null&&e.getValue()?"green":"red",value:e!=null&&e.getValue()?"Aprovado":"No aprovado"})}),footer:e=>e.column.id})];function H(){const{employees:e,isLoading:l}=w(),{id:d,closeAlert:i,user:t}=E(a=>a),m=f(),u=M.includes((t==null?void 0:t.role)||""),{mutate:p,isLoading:x}=A(()=>y.deleteEmployee(d),{onSuccess:()=>{i(),m.invalidateQueries([L.EMPLOYEE]),n("Empleado eliminado de forma exitosa",null)},onError:a=>{i(),n(`opps! algo no va bien ${a}`,"error")}});return l||x?s.jsx(N,{}):s.jsxs("div",{className:"relative",children:[(t==null?void 0:t.role)==="ADMIN"&&s.jsx("div",{className:"absolute z-20 right-[210px] -top-[74px]",children:s.jsx(C,{data:(e==null?void 0:e.results)||[],fileName:"empleados"})}),s.jsxs(r,{columns:B,showActions:!u,data:(e==null?void 0:e.results.map(a=>{const v=(a.observations||[]).sort((g,j)=>{const b=new Date(g.createdAt);return new Date(j.createdAt).getTime()-b.getTime()})[0]||{initDate:0,endDate:0,id:0};return{...a,observations:v}}))||[],children:[s.jsx(r.RowHeader,{}),s.jsx(r.Body,{})]}),s.jsx(Y,{acction:p,title:"Seguro que desea realizar esta acccion?",description:"esta accion no es revercible"})]})}export{H as default};
