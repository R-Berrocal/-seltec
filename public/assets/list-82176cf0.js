import{r as x,j as t,e as c,u as V,k as g,l as j,m as u}from"./index-4f0194d7.js";import{D as L,I as E,T as R,A as h,c as y}from"./info-9a838d04.js";import{B as D}from"./block_role-b3da2c39.js";import{u as M,a as P,V as A}from"./vehicle-b1ccfc12.js";import{Q as C}from"./query-keys-2b4b518a.js";const S=()=>{const{vechile:e,isLoading:l}=M(),r=x.useMemo(()=>{var a;return[{title:"placa",value:e==null?void 0:e.plate},{title:"tipo",value:e==null?void 0:e.type},{title:"Modelo",value:e==null?void 0:e.model},{title:"Placa De Remolque",value:e==null?void 0:e.trailerPlate},{title:"Dueño",value:e==null?void 0:e.owner},{title:"empresa",value:(a=e==null?void 0:e.company)==null?void 0:a.name}]},[e]);return t.jsx(L,{title:"Información del vehiculo",children:l?t.jsx(c,{}):t.jsx(E,{data:r})})},s=y();function H(){const{vehicles:e,isLoading:l}=P(),{idRemove:r,closeAlert:a,user:i}=V(o=>o),d=g(),n=D.includes((i==null?void 0:i.role)||""),{mutate:m,isLoading:p}=j(()=>A.deleteVehicle(r),{onSuccess:()=>{a(),d.invalidateQueries([C.VEHICLE]),u("Vehiculo eliminado de forma exitosa",null)},onError:o=>{u(`opps! algo no va bien ${o}`,"error")}}),f=[s.accessor("plate",{header:()=>"Placa",cell:o=>o.getValue(),footer:o=>o.column.id}),s.accessor("type",{header:()=>"Tipo",cell:o=>o.getValue(),footer:o=>o.column.id}),s.accessor("model",{header:()=>"Modelo",cell:o=>o.getValue(),footer:o=>o.column.id}),s.accessor("trailerPlate",{header:()=>"Placa de remolque",cell:o=>o.getValue(),footer:o=>o.column.id})];return l||p?t.jsx(c,{}):t.jsxs("div",{children:[t.jsx(R,{data:(e==null?void 0:e.results)||[],columns:f,showActions:!n,showDelete:!n,showUpdate:!n}),t.jsx(S,{}),t.jsx(h,{handleRemove:m})]})}export{H as default};
