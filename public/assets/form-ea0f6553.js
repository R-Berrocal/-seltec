import{n as v,o as w,q as E,k as M,r as c,b as y,m as u,l as L,s as V,j as s,e as k,I as n,a as q,t as Q}from"./index-dea8633d.js";import{Q as $}from"./query-keys-9f424c63.js";import{b as Y,C as S}from"./company-6570ec82.js";const A=v().shape({name:w().required("El nombre es requerido!")}),D={name:"",legalName:"",address:"",phone:"",email:"",webSite:""};function F(){const t=E(),d=M(),{company:e,isLoading:g}=Y(),b=c.useMemo(()=>({name:(e==null?void 0:e.name)||"",legalName:(e==null?void 0:e.legalName)||"",email:(e==null?void 0:e.email)||"",address:(e==null?void 0:e.address)||"",phone:(e==null?void 0:e.phone)||"",webSite:(e==null?void 0:e.webSite)||""}),[e]),i=y(),a=c.useCallback(async l=>{try{await S.editcompany(t.id||"",l),u("Empresa actualizada exitosamente",null)}catch(r){u(`opps!! algo no va bien ${r.response.data.message||""}`,"error"),console.error(r)}},[t]),o=c.useCallback(async l=>{try{const r=await S.createCompany(l);return u("Empresa creada exitosamente",null),i("/companies"),r}catch(r){u(`opps!! algo no va bien ${r.response.data.message||""}`,"error"),console.error(r)}},[i]),{mutateAsync:p,isLoading:m}=L(t.id?a:o,{onSuccess:()=>{d.invalidateQueries([$.COMPANY])}});return{isLoading:g||m,submit:p,formValues:{defaultValues:t.id?b:D},status:t.id?"Editar empresa":"Crear empresa",isEditing:!!t.id}}const R=()=>{var m,l,r,f,x,h,N,j;const{submit:t,isLoading:d,formValues:{defaultValues:e},status:g}=F(),{handleSubmit:b,reset:i,formState:{errors:a},control:o}=V({mode:"all",defaultValues:e,resolver:Q(A)});c.useEffect(()=>{i(e)},[i,e]);const p=C=>{t(C)};return d?s.jsx(k,{}):s.jsxs("form",{onSubmit:b(p),className:"bg-white dark:bg-black mt-5 flex flex-col space-y-4",children:[s.jsxs("div",{className:"flex gap-4",children:[s.jsx(n,{control:o,name:"name",label:"Nombre",errorMessage:((m=a.name)==null?void 0:m.message)||"",error:!!a.name}),s.jsx(n,{control:o,name:"legalName",label:"Nombre Legal",errorMessage:((l=a.legalName)==null?void 0:l.message)||"",error:!!a.legalName})]}),s.jsxs("div",{className:"flex gap-4",children:[s.jsx(n,{control:o,name:"email",label:"correo electronico",type:"email",errorMessage:((r=a.email)==null?void 0:r.message)||"",error:!!a.email}),s.jsx(n,{control:o,name:"address",label:"Dirección",errorMessage:((f=a.address)==null?void 0:f.message)||"",error:!!a.address})]}),s.jsxs("div",{className:"flex gap-4",children:[s.jsx(n,{control:o,name:"phone",label:"Teléfono",errorMessage:((x=a.phone)==null?void 0:x.message)||"",error:!!((h=a.phone)!=null&&h.message)}),s.jsx(n,{control:o,name:"webSite",label:"Sitio Web",errorMessage:((N=a.webSite)==null?void 0:N.message)||"",error:!!((j=a.webSite)!=null&&j.message)})]}),s.jsx(q.Button,{type:"submit",className:"mt-10",children:g})]})};export{R as default};
