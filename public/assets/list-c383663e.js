import{r as x,j as l,e as p,u as V,k as A,l as j,m as d}from"./index-3bd54e17.js";import{T as y,c as E}from"./table-c4555493.js";import{D as S,B as L,A as D}from"./block_role-c3fdb52e.js";import{Q as g}from"./query-keys-f3f28151.js";import{I as R}from"./info-7161dd75.js";import{u as b,a as T,A as $}from"./assigned-vehicle-eac97ed9.js";const C=()=>{const{assigned:e,isLoading:i}=b(),c=x.useMemo(()=>{var a,t,s;return[{title:"Dias de servicio",value:e==null?void 0:e.daysService},{title:"Observacion",value:e==null?void 0:e.observations},{title:"Tipo de operacion",value:e==null?void 0:e.operationType},{title:"Vehiculo",value:(a=e==null?void 0:e.vehicle)==null?void 0:a.model},{title:"Empleado",value:`${(t=e==null?void 0:e.employee)==null?void 0:t.name} ${(s=e==null?void 0:e.employee)==null?void 0:s.lastName}`}]},[e]);return l.jsx(S,{title:"InformaciÃ³n de la assignacion",children:i?l.jsx(p,{}):l.jsx(R,{data:c})})},r=E();function k(){const{assigneds:e,isLoading:i}=T(),{idRemove:c,closeAlert:a,user:t}=V(o=>o),s=A(),n=L.includes((t==null?void 0:t.role)||""),{mutate:v,isLoading:h}=j(()=>$.deleteAssignedVehicle(c),{onSuccess:()=>{a(),s.invalidateQueries([g.ASSIGNED]),d("operacion realizada de forma exitosa",null)},onError:o=>{d(`opps! algo no va bien ${o}`,"error")}}),f=[r.accessor("operationType",{header:()=>"Operacion",cell:o=>o.getValue(),footer:o=>o.column.id}),r.accessor("daysService",{header:()=>"Dias de servicios",cell:o=>o.getValue(),footer:o=>o.column.id}),r.accessor("employee",{header:()=>"Empleado",cell:o=>{var u,m;return`${(u=o.getValue())==null?void 0:u.name} ${(m=o.getValue())==null?void 0:m.lastName}`},footer:o=>o.column.id}),r.accessor("vehicle.model",{header:()=>"Vehiculo",cell:o=>o.getValue(),footer:o=>o.column.id})];return i||h?l.jsx(p,{}):l.jsxs("div",{children:[l.jsx(y,{columns:f,data:(e==null?void 0:e.results)||[],showDelete:!n,showUpdate:!n}),l.jsx(C,{}),l.jsx(D,{handleRemove:v})]})}export{k as default};
