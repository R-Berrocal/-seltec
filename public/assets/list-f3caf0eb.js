import{m as n,j as t,c,b,n as D,p as E,L as j,Q as Y,q as l}from"./index-e9c0a00a.js";import{T as L,c as A}from"./table-fd10b765.js";import{A as M}from"./alert-ae0aa934.js";import{D as N}from"./download-74975c31.js";import{B as w}from"./block_role-b3da2c39.js";import{u as C,E as S}from"./employee-2c6bfc01.js";import"./useQuery-e736bbaf.js";const o=A(),V=[o.accessor("name",{header:()=>"Nombre",cell:e=>`${e.getValue()}`,footer:e=>e.column.id}),o.accessor("identification",{header:()=>"Identificacion",cell:e=>e.getValue(),footer:e=>e.column.id}),o.accessor("observations.initDate",{header:()=>"Fecha de ingreso",cell:e=>e.getValue()?n(e.getValue()||"").format("YYYY-MM-DD"):t.jsx(c.Chip,{color:"red",value:"sin fecha",className:"text-center"}),footer:e=>e.column.id}),o.accessor("observations.endDate",{header:()=>"Fecha de salida",cell:e=>e.getValue()?n(e.getValue()||"").format("YYYY-MM-DD"):t.jsx(c.Chip,{color:"red",value:"sin fecha",className:"text-center"}),footer:e=>e.column.id})];function F(){const{employees:e,isLoading:d}=C(),{id:u,closeAlert:i,user:a}=b(s=>s),m=D(),r=w.includes((a==null?void 0:a.role)||""),{mutate:p,isLoading:f}=E(()=>S.deleteEmployee(u),{onSuccess:()=>{i(),m.invalidateQueries([Y.EMPLOYEE]),l("Empleado eliminado de forma exitosa",null)},onError:s=>{i(),l(`opps! algo no va bien ${s}`,"error")}});return d||f?t.jsx(j,{}):t.jsxs("div",{className:"relative",children:[(a==null?void 0:a.role)==="ADMIN"&&t.jsx("div",{className:"absolute z-20 right-[210px] -top-[74px]",children:t.jsx(N,{data:(e==null?void 0:e.results)||[],fileName:"empleados"})}),t.jsx(L,{total:(e==null?void 0:e.count)||0,columns:V,data:(e==null?void 0:e.results.map(s=>{const h=(s.observations||[]).sort((x,g)=>{const v=new Date(x.createdAt);return new Date(g.createdAt).getTime()-v.getTime()})[0]||{initDate:0,endDate:0,id:0};return{...s,observations:h}}))||[],showActions:!r,showDelete:!r,showUpdate:!r}),t.jsx(M,{acction:p,title:"Seguro que desea realizar esta acccion?",description:"esta accion no es revercible"})]})}export{F as default};
