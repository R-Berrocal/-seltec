import{r as p,j as t,e as c,u as x,k as g,l as h,a as U,m as i}from"./index-bbfb2b48.js";import{T as j,c as E}from"./table-f506fd45.js";import{D as R,a as C,A as I}from"./block_role-49218549.js";import{I as L}from"./info-6aa01e04.js";import{u as _,a as A,U as V}from"./user-0abd664e.js";import{Q as N}from"./query-keys-f38cae6f.js";const S=()=>{const{user:e,isLoading:l}=_(),s=p.useMemo(()=>[{title:"Id",value:e==null?void 0:e.id},{title:"nombre",value:e==null?void 0:e.full_name},{title:"correo electronico",value:e==null?void 0:e.email},{title:"teléfono",value:(e==null?void 0:e.phone)||""},{title:"Rol",value:(e==null?void 0:e.role)||""},{title:"Estado",value:`${e!=null&&e.is_deleted?"INACTIVO":"ACTIVO"}`},{title:"Fecha de creacion",value:e==null?void 0:e.created_at}],[e]);return t.jsx(R,{title:"Información el usuario",children:l?t.jsx(c,{}):t.jsx(L,{data:s})})},a=E();function y(){const{users:e,isLoading:l}=A(),{idRemove:s,closeAlert:n,user:r}=x(o=>o),d=g(),m=C.includes((r==null?void 0:r.role)||""),{mutate:u,isLoading:f}=h(()=>V.deleteUser(s),{onSuccess:()=>{n(),d.invalidateQueries([N.USER]),i("User eliminado de forma exitosa",null)},onError:o=>{i(`opps! algo no va bien ${o}`,"error")}}),v=[a.accessor("full_name",{header:()=>"Nombre",cell:o=>o.getValue(),footer:o=>o.column.id}),a.accessor("email",{header:()=>"Email",cell:o=>o.getValue(),footer:o=>o.column.id}),a.accessor("role",{header:()=>"Rol",cell:o=>o.getValue(),footer:o=>o.column.id}),a.accessor("is_deleted",{header:()=>"Estado",cell:o=>t.jsx(U.Chip,{className:"text-center",size:"sm",color:o.getValue()?"red":"green",value:o.getValue()?"Inactivo":"Activo"}),footer:o=>o.column.id})];return l||f?t.jsx(c,{}):t.jsxs("div",{className:"",children:[t.jsx(j,{data:(e==null?void 0:e.results)||[],columns:v,showDelete:!1,showUpdate:!m}),t.jsx(S,{}),t.jsx(I,{handleRemove:u})]})}export{y as default};
