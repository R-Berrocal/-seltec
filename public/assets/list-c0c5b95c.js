import{r as v,j as l,e as n,u as f,k as x,l as A,m as c}from"./index-4f0194d7.js";import{D as V,I as j,T as y,A as E,c as S}from"./info-9a838d04.js";import{Q as L}from"./query-keys-2b4b518a.js";import{B as D}from"./block_role-b3da2c39.js";import{u as g,a as R,A as b}from"./assigned-vehicle-565fb015.js";const T=()=>{const{assigned:e,isLoading:t}=g(),a=v.useMemo(()=>[{title:"Dias de servicio",value:e==null?void 0:e.daysService},{title:"Observacion",value:e==null?void 0:e.observations},{title:"Tipo de operacion",value:e==null?void 0:e.operationType},{title:"Vehiculo",value:e==null?void 0:e.vehicle.model},{title:"Empleado",value:`${e==null?void 0:e.employee.name} ${e==null?void 0:e.employee.lastName}`}],[e]);return l.jsx(V,{title:"InformaciÃ³n de la assignacion",children:t?l.jsx(n,{}):l.jsx(j,{data:a})})},s=S();function Q(){const{assigneds:e,isLoading:t}=R(),{idRemove:a,closeAlert:u,user:i}=f(o=>o),m=x(),r=D.includes((i==null?void 0:i.role)||""),{mutate:d,isLoading:p}=A(()=>b.deleteAssignedVehicle(a),{onSuccess:()=>{u(),m.invalidateQueries([L.ASSIGNED]),c("operacion realizada de forma exitosa",null)},onError:o=>{c(`opps! algo no va bien ${o}`,"error")}}),h=[s.accessor("operationType",{header:()=>"Operacion",cell:o=>o.getValue(),footer:o=>o.column.id}),s.accessor("daysService",{header:()=>"Dias de servicios",cell:o=>o.getValue(),footer:o=>o.column.id}),s.accessor("employee",{header:()=>"Empleado",cell:o=>`${o.getValue().name} ${o.getValue().lastName}`,footer:o=>o.column.id}),s.accessor("vehicle.model",{header:()=>"Vehiculo",cell:o=>o.getValue(),footer:o=>o.column.id})];return t||p?l.jsx(n,{}):l.jsxs("div",{children:[l.jsx(y,{columns:h,data:(e==null?void 0:e.results)||[],showActions:!r,showDelete:!r,showUpdate:!r}),l.jsx(T,{}),l.jsx(E,{handleRemove:d})]})}export{Q as default};
