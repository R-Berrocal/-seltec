import{r as x,j as s,e as d,u as g,k as D,l as O,M as n,m as c}from"./index-602d4f83.js";import{D as j,I as v,B as Y,T as y,A as M,c as E}from"./info-cc8e7551.js";import{u as L,a as R,O as S}from"./observation-14ce4b13.js";import{Q as A}from"./query-keys-652ea5af.js";const V=()=>{const{observation:e,isLoading:o}=L(),l=x.useMemo(()=>[{title:"empleado",value:`${e==null?void 0:e.employee.name} ${e==null?void 0:e.employee.lastName}`},{title:"identificacion",value:e==null?void 0:e.employee.identification},{title:"correo",value:e==null?void 0:e.employee.email},{title:"observacion",value:e==null?void 0:e.observation},{title:"Fecha de ingreso",value:e==null?void 0:e.initDate},{title:"Fecha de salida",value:e==null?void 0:e.endDate}],[e]);return s.jsx(j,{title:"InformaciÃ³n de la observacion",children:o?s.jsx(d,{}):s.jsx(v,{data:l})})},t=E();function B(){const{observations:e,isLoading:o}=R(),{idRemove:l,closeAlert:u,user:i}=g(a=>a),m=D(),r=Y.includes((i==null?void 0:i.role)||""),{mutate:f,isLoading:p}=O(()=>S.deleteObservation(l),{onSuccess:()=>{u(),m.invalidateQueries([A.OBSERVATION]),c("Observacion eliminada de forma exitosa",null)},onError:a=>{c(`opps! algo no va bien ${a}`,"error")}}),h=[t.accessor("employee.name",{header:()=>"Empleado",cell:a=>a.getValue(),footer:a=>a.column.id}),t.accessor("observation",{header:()=>"Observacion",cell:a=>a.getValue(),footer:a=>a.column.id}),t.accessor("initDate",{header:()=>"Fecha de ingreso",cell:a=>n(a.getValue()).format("DD/MM/YYYY"),footer:a=>a.column.id}),t.accessor("endDate",{header:()=>"Fecha de salida",cell:a=>n(a.getValue()).format("DD/MM/YYYY"),footer:a=>a.column.id})];return o||p?s.jsx(d,{}):s.jsxs("div",{children:[s.jsx(y,{columns:h,data:(e==null?void 0:e.results)||[],showDelete:!r,showUpdate:!r}),s.jsx(V,{}),s.jsx(M,{handleRemove:f})]})}export{B as default};
