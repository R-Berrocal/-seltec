import{b as p,n as h,p as f,j as a,L as g,Q as v,q as c}from"./index-b3d32b80.js";import{T as x,c as A}from"./table-09637b37.js";import{A as V}from"./alert-1b131d0d.js";import{D as S}from"./download-23f80eb7.js";import{B as j}from"./block_role-b3da2c39.js";import{u as L,A as E}from"./assigned-vehicle-163d9945.js";import"./useQuery-96cae606.js";const r=A(),N=[r.accessor("operationType",{header:()=>"Operacion",cell:e=>e.getValue(),footer:e=>e.column.id}),r.accessor("daysService",{header:()=>"Dias de servicios",cell:e=>e.getValue(),footer:e=>e.column.id}),r.accessor("employee",{header:()=>"Empleado",cell:e=>{var s,t;return`${(s=e.getValue())==null?void 0:s.name} ${(t=e.getValue())==null?void 0:t.lastName}`},footer:e=>e.column.id}),r.accessor("vehicle.plate",{header:()=>"Vehiculo - placa",cell:e=>e.getValue(),footer:e=>e.column.id})];function z(){const{assigneds:e,isLoading:s}=L(),{id:t,closeAlert:n,user:o}=p(l=>l),u=h(),i=j.includes((o==null?void 0:o.role)||""),{mutate:d,isLoading:m}=f(()=>E.deleteAssignedVehicle(t),{onSuccess:()=>{n(),u.invalidateQueries([v.ASSIGNED]),c("operacion realizada de forma exitosa",null)},onError:l=>{c(`opps! algo no va bien ${l}`,"error")}});return s||m?a.jsx(g,{}):a.jsxs("div",{className:"relative",children:[(o==null?void 0:o.role)==="ADMIN"&&a.jsx("div",{className:"absolute z-20 right-[270px] -top-12",children:a.jsx(S,{data:(e==null?void 0:e.results)||[],fileName:"vehiculos-asignados"})}),a.jsx(x,{total:(e==null?void 0:e.count)||0,columns:N,data:(e==null?void 0:e.results)||[],showActions:!i,showDelete:!i,showUpdate:!i}),a.jsx(V,{acction:d,title:"Seguro que desea realizar esta acccion?",description:"esta accion no es revercible"})]})}export{z as default};
