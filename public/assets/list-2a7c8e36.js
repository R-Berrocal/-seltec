import{m as i,b as f,n as h,p as g,j as o,L as x,Q as v,q as l,aa as D}from"./index-e9c0a00a.js";import{T as Y,c as b}from"./table-fd10b765.js";import{A as j}from"./alert-ae0aa934.js";import{D as O}from"./download-74975c31.js";import{B as L}from"./block_role-b3da2c39.js";import{u as E}from"./observation-4c0ebd72.js";import"./useQuery-e736bbaf.js";const s=b(),M=[s.accessor("employee.name",{header:()=>"Empleado",cell:e=>e.getValue(),footer:e=>e.column.id}),s.accessor("observation",{header:()=>"Observacion",cell:e=>e.getValue(),footer:e=>e.column.id}),s.accessor("initDate",{header:()=>"Fecha de ingreso",cell:e=>i(e.getValue()).format("YYYY-MM-DD"),footer:e=>e.column.id}),s.accessor("endDate",{header:()=>"Fecha de salida",cell:e=>i(e.getValue()).format("YYYY-MM-DD"),footer:e=>e.column.id})];function C(){const{observations:e,isLoading:c}=E(),{id:n,closeAlert:d,user:a}=f(r=>r),m=h(),t=L.includes((a==null?void 0:a.role)||""),{mutate:u,isLoading:p}=g(()=>D.deleteObservation(n),{onSuccess:()=>{d(),m.invalidateQueries([v.OBSERVATION]),l("Observacion eliminada de forma exitosa",null)},onError:r=>{l(`opps! algo no va bien ${r}`,"error")}});return c||p?o.jsx(x,{}):o.jsxs("div",{className:"relative",children:[(a==null?void 0:a.role)==="ADMIN"&&o.jsx("div",{className:"absolute z-20 right-[230px] -top-12",children:o.jsx(O,{data:(e==null?void 0:e.results)||[],fileName:"observaciones"})}),o.jsx(Y,{total:(e==null?void 0:e.count)||0,columns:M,data:(e==null?void 0:e.results)||[],showDelete:!t,showUpdate:!t,showActions:!t}),o.jsx(j,{acction:u,title:"Seguro que desea realizar esta acccion?",description:"esta accion no es revercible"})]})}export{C as default};
