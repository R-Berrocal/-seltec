import{r as x,j as s,e as d,u as g,k as v,l as D,v as n,m as c}from"./index-5c19e2b0.js";import{T as O,c as j}from"./table-d8c39afe.js";import{D as Y,B as y,A as E}from"./block_role-1b649fe8.js";import{I as L}from"./info-fe831cc6.js";import{u as M,a as R,O as S}from"./observation-29a8f247.js";import{Q as A}from"./query-keys-c2ebbff1.js";const V=()=>{const{observation:e,isLoading:o}=M(),l=x.useMemo(()=>[{title:"empleado",value:`${e==null?void 0:e.employee.name} ${e==null?void 0:e.employee.lastName}`},{title:"identificacion",value:e==null?void 0:e.employee.identification},{title:"correo",value:e==null?void 0:e.employee.email},{title:"observacion",value:e==null?void 0:e.observation},{title:"Fecha de ingreso",value:e==null?void 0:e.initDate},{title:"Fecha de salida",value:e==null?void 0:e.endDate}],[e]);return s.jsx(Y,{title:"InformaciÃ³n de la observacion",children:o?s.jsx(d,{}):s.jsx(L,{data:l})})},t=j();function T(){const{observations:e,isLoading:o}=R(),{idRemove:l,closeAlert:m,user:i}=g(a=>a),u=v(),r=y.includes((i==null?void 0:i.role)||""),{mutate:f,isLoading:p}=D(()=>S.deleteObservation(l),{onSuccess:()=>{m(),u.invalidateQueries([A.OBSERVATION]),c("Observacion eliminada de forma exitosa",null)},onError:a=>{c(`opps! algo no va bien ${a}`,"error")}}),h=[t.accessor("employee.name",{header:()=>"Empleado",cell:a=>a.getValue(),footer:a=>a.column.id}),t.accessor("observation",{header:()=>"Observacion",cell:a=>a.getValue(),footer:a=>a.column.id}),t.accessor("initDate",{header:()=>"Fecha de ingreso",cell:a=>n(a.getValue()).format("YYYY-MM-DD"),footer:a=>a.column.id}),t.accessor("endDate",{header:()=>"Fecha de salida",cell:a=>n(a.getValue()).format("YYYY-MM-DD"),footer:a=>a.column.id})];return o||p?s.jsx(d,{}):s.jsxs("div",{children:[s.jsx(O,{columns:h,data:(e==null?void 0:e.results)||[],showDelete:!r,showUpdate:!r}),s.jsx(V,{}),s.jsx(E,{handleRemove:f})]})}export{T as default};
