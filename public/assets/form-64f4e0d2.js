import{p as b,q as x,t as G,g as y,r as l,b as h,i,h as v,v as E,j as c,f as j,I as S,a as V,w as L}from"./index-9b3c73aa.js";import{Q as k}from"./query-keys-9b3b25cc.js";import{b as w,G as g}from"./group-515c098e.js";const C=b().shape({name:x().required("El nombre es requerido!")}),N={name:""};function q(){const a=G(),m=y(),{group:e,isLoading:d}=w(),o=l.useMemo(()=>({name:(e==null?void 0:e.name)||""}),[e]),r=h(),n=l.useCallback(async t=>{try{await g.editGroup(a.id||"",t),i("Grupo actualizado exitosamente",null)}catch(s){i(`opps!! algo no va bien ${s.response.data.message||""}`,"error"),console.error(s)}},[a]),p=l.useCallback(async t=>{try{const s=await g.createGroup(t);return i("Grupo creado exitosamente",null),r("/groups"),s}catch(s){i(`opps!! algo no va bien ${s.response.data.message||""}`,"error"),console.error(s)}},[r]),{mutateAsync:f,isLoading:u}=v(a.id?n:p,{onSuccess:()=>{m.invalidateQueries([k.GROUP])}});return{isLoading:d||u,submit:f,formValues:{defaultValues:Object.keys(o).length<0?N:o},status:a.id?"Editar grupo":"Crear grupo",isEditing:!!a.id}}const O=()=>{var u;const{submit:a,isLoading:m,formValues:{defaultValues:e},status:d}=q(),{handleSubmit:o,reset:r,formState:{errors:n},control:p}=E({mode:"all",defaultValues:e,resolver:L(C)});l.useEffect(()=>{r(e)},[r,e]);const f=t=>{a(t)};return m?c.jsx(j,{}):c.jsxs("form",{onSubmit:o(f),className:"bg-white dark:bg-black mt-5 flex flex-col space-y-4",children:[c.jsx(S,{control:p,name:"name",label:"Nombre",errorMessage:((u=n.name)==null?void 0:u.message)||"",error:!!n.name}),c.jsx(V.Button,{type:"submit",className:"mt-10",children:d})]})};export{O as default};
