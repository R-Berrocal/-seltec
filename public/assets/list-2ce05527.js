import{r as g,j as s,e as m,u as j,k as p,l as L,a as u,m as d}from"./index-bbfb2b48.js";import{T as b,c as f}from"./table-f506fd45.js";import{D as C,B as D,A as N}from"./block_role-49218549.js";import{Q as R}from"./query-keys-f38cae6f.js";import{I as V}from"./info-6aa01e04.js";import{u as M,a as S,E as A}from"./employee-f8758d6c.js";const I=()=>{const{employee:a,isLoading:o}=M(),l=g.useMemo(()=>[{title:"nombre",value:a==null?void 0:a.name},{title:"apellido",value:a==null?void 0:a.lastName},{title:"identificacion",value:a==null?void 0:a.identification},{title:"correo electronico",value:a==null?void 0:a.email},{title:"empresa",value:a==null?void 0:a.company.name},{title:"cargo",value:a==null?void 0:a.roleEmployee.name},{title:"direccion",value:(a==null?void 0:a.address)||""}],[a]);return s.jsx(C,{title:"Informacion sobre el empleado",children:o?s.jsx(m,{}):s.jsx(V,{data:l})})},r=f();function F(){const{employees:a,isLoading:o}=S(),{idRemove:l,closeAlert:i,user:c}=j(e=>e),v=p(),n=D.includes((c==null?void 0:c.role)||""),{mutate:x,isLoading:E}=L(()=>A.deleteEmployee(l),{onSuccess:()=>{i(),v.invalidateQueries([R.EMPLOYEE]),d("Empleado eliminado de forma exitosa",null)},onError:e=>{i(),d(`opps! algo no va bien ${e}`,"error")}}),h=[r.accessor("name",{header:()=>"Nombre",cell:e=>`${e.getValue()}`,footer:e=>e.column.id}),r.accessor("identification",{header:()=>"Identificacion",cell:e=>e.getValue(),footer:e=>e.column.id}),r.accessor("observations",{header:()=>"Fecha de ingreso",cell:e=>{var t;return e!=null&&e.getValue()[0]?(t=e==null?void 0:e.getValue()[0])==null?void 0:t.initDate:s.jsx(u.Chip,{color:"red",value:"sin fecha",className:"text-center"})},footer:e=>e.column.id}),r.accessor("observations",{header:()=>"Fecha de salida",cell:e=>{var t;return e!=null&&e.getValue()[0]?(t=e==null?void 0:e.getValue()[0])==null?void 0:t.endDate:s.jsx(u.Chip,{color:"red",value:"sin fecha",className:"text-center"})},footer:e=>e.column.id})];return o||E?s.jsx(m,{}):s.jsxs("div",{className:"",children:[s.jsx(b,{columns:h,data:(a==null?void 0:a.results)||[],showDelete:!n,showUpdate:!n}),s.jsx(I,{}),s.jsx(N,{handleRemove:x})]})}export{F as default};
