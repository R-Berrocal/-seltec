import{n as b,o as x,q as G,k as y,r as c,b as h,m as u,l as E,s as v,j as i,e as S,I as V,a as j,t as L}from"./index-dea8633d.js";import{Q as k}from"./query-keys-9f424c63.js";import{a as C,G as g}from"./group-bcf359f5.js";const N=b().shape({name:x().required("El nombre es requerido!")}),q={name:""};function w(){const e=G(),l=y(),{group:a,isLoading:m}=C(),d=c.useMemo(()=>({name:(a==null?void 0:a.name)||""}),[a]),r=h(),o=c.useCallback(async t=>{try{await g.editGroup(e.id||"",t),u("Grupo actualizado exitosamente",null)}catch(s){u(`opps!! algo no va bien ${s.response.data.message||""}`,"error"),console.error(s)}},[e]),p=c.useCallback(async t=>{try{const s=await g.createGroup(t);return u("Grupo creado exitosamente",null),r("/groups"),s}catch(s){u(`opps!! algo no va bien ${s.response.data.message||""}`,"error"),console.error(s)}},[r]),{mutateAsync:f,isLoading:n}=E(e.id?o:p,{onSuccess:()=>{l.invalidateQueries([k.GROUP])}});return{isLoading:m||n,submit:f,formValues:{defaultValues:e.id?d:q},status:e.id?"Editar grupo":"Crear grupo",isEditing:!!e.id}}const R=()=>{var n;const{submit:e,isLoading:l,formValues:{defaultValues:a},status:m}=w(),{handleSubmit:d,reset:r,formState:{errors:o},control:p}=v({mode:"all",defaultValues:a,resolver:L(N)});c.useEffect(()=>{r(a)},[r,a]);const f=t=>{e(t)};return l?i.jsx(S,{}):i.jsxs("form",{onSubmit:d(f),className:"bg-white dark:bg-black mt-5 flex flex-col space-y-4",children:[i.jsx(V,{control:p,name:"name",label:"Nombre",errorMessage:((n=o.name)==null?void 0:n.message)||"",error:!!o.name}),i.jsx(j.Button,{type:"submit",className:"mt-10",children:m})]})};export{R as default};
