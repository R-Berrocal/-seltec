import{m as x,j as o,c as f,b as g,n as j,p as S,L as h,T as r,q as v,Q as H,t as i}from"./index-00a53ffa.js";import{A as L}from"./alert-cd0f6524.js";import{B as y}from"./block_role-55ad1a6d.js";import{u as E,H as N}from"./history-005ccf87.js";import"./useQuery-400e87ec.js";const s=v(),O=[s.accessor("employee.name",{header:()=>"Empleado",cell:e=>e.getValue(),footer:e=>e.column.id}),s.accessor("observation",{header:()=>"Observacion",cell:e=>e.getValue(),footer:e=>e.column.id}),s.accessor("date",{header:()=>"Fecha",cell:e=>x(e.getValue()).format("YYYY-MM-DD"),footer:e=>e.column.id}),s.accessor("location.name",{header:()=>"Locacion",cell:e=>e.getValue(),footer:e=>e.column.id}),s.accessor("operation",{header:()=>"Operacion",cell:e=>o.jsx("div",{className:"max-w-[100px] flex items-center justify-center mx-auto",children:o.jsx(f.Chip,{className:"text-center",size:"sm",color:e.getValue()==="INGRESO"?"green":"red",value:e.getValue()==="INGRESO"?"INGRESO":"SALIDA"})}),footer:e=>e.column.id})];function V(){const{histories:e,isLoading:c}=E(),{id:l,closeAlert:n,user:a}=g(t=>t),u=j(),d=y.includes((a==null?void 0:a.role)||""),{mutate:m,isLoading:p}=S(()=>N.deleteHistory(l),{onSuccess:()=>{n(),u.invalidateQueries([H.HISTORY]),i("Historia eliminada de forma exitosa",null)},onError:t=>{i(`opps! algo no va bien ${t}`,"error")}});return c||p?o.jsx(h,{}):o.jsxs("div",{className:"relative",children:[o.jsxs(r,{data:(e==null?void 0:e.results)||[],columns:O,showActions:!d,children:[o.jsx(r.RowHeader,{}),o.jsx(r.Body,{})]}),o.jsx(L,{acction:m,title:"Seguro que desea realizar esta acccion?",description:"esta accion no es revercible"})]})}export{V as default};
