import{n as b,o as x,q as y,k as R,r as l,b as h,m as i,l as E,s as v,j as u,e as C,I as S,a as V,t as j}from"./index-3bd54e17.js";import{Q as L}from"./query-keys-f3f28151.js";import{b as k,R as f}from"./role-f1ce3dfa.js";const N=b().shape({name:x().required("El nombre es requerido!")}),q={name:""};function w(){const e=y(),c=R(),{role:a,isLoading:m}=k(),d=l.useMemo(()=>({name:(a==null?void 0:a.name)||""}),[a]),r=h(),o=l.useCallback(async t=>{try{await f.editRole(e.id||"",t),i("Cargo actualizado exitosamente",null)}catch(s){i(`opps!! algo no va bien ${s.response.data.message||""}`,"error"),console.error(s)}},[e]),g=l.useCallback(async t=>{try{const s=await f.createRole(t);return i("Cargo creado exitosamente",null),r("/roles"),s}catch(s){i(`opps!! algo no va bien ${s.response.data.message||""}`,"error"),console.error(s)}},[r]),{mutateAsync:p,isLoading:n}=E(e.id?o:g,{onSuccess:()=>{c.invalidateQueries([L.GROUP])}});return{isLoading:m||n,submit:p,formValues:{defaultValues:e.id?d:q},status:e.id?"Editar cargo":"Crear cargo",isEditing:!!e.id}}const $=()=>{var n;const{submit:e,isLoading:c,formValues:{defaultValues:a},status:m}=w(),{handleSubmit:d,reset:r,formState:{errors:o},control:g}=v({mode:"all",defaultValues:a,resolver:j(N)});l.useEffect(()=>{r(a)},[r,a]);const p=t=>{e(t)};return c?u.jsx(C,{}):u.jsxs("form",{onSubmit:d(p),className:"bg-white dark:bg-black mt-5 flex flex-col space-y-4",children:[u.jsx(S,{control:g,name:"name",label:"Nombre",errorMessage:((n=o.name)==null?void 0:n.message)||"",error:!!o.name}),u.jsx(V.Button,{type:"submit",className:"mt-10",children:m})]})};export{$ as default};
