import{r as x,j as s,e as d,u as g,k as D,l as O,M as n,m as c}from"./index-38497bf7.js";import{T as j,c as v}from"./table-eea1923c.js";import{D as Y,B as y,A as M}from"./block_role-8f431153.js";import{I as E}from"./info-50ae1901.js";import{u as L,a as R,O as S}from"./observation-0ae71cba.js";import{Q as A}from"./query-keys-cd3f1922.js";const V=()=>{const{observation:e,isLoading:o}=L(),l=x.useMemo(()=>[{title:"empleado",value:`${e==null?void 0:e.employee.name} ${e==null?void 0:e.employee.lastName}`},{title:"identificacion",value:e==null?void 0:e.employee.identification},{title:"correo",value:e==null?void 0:e.employee.email},{title:"observacion",value:e==null?void 0:e.observation},{title:"Fecha de ingreso",value:e==null?void 0:e.initDate},{title:"Fecha de salida",value:e==null?void 0:e.endDate}],[e]);return s.jsx(Y,{title:"InformaciÃ³n de la observacion",children:o?s.jsx(d,{}):s.jsx(E,{data:l})})},t=v();function T(){const{observations:e,isLoading:o}=R(),{idRemove:l,closeAlert:m,user:i}=g(a=>a),u=D(),r=y.includes((i==null?void 0:i.role)||""),{mutate:f,isLoading:p}=O(()=>S.deleteObservation(l),{onSuccess:()=>{m(),u.invalidateQueries([A.OBSERVATION]),c("Observacion eliminada de forma exitosa",null)},onError:a=>{c(`opps! algo no va bien ${a}`,"error")}}),h=[t.accessor("employee.name",{header:()=>"Empleado",cell:a=>a.getValue(),footer:a=>a.column.id}),t.accessor("observation",{header:()=>"Observacion",cell:a=>a.getValue(),footer:a=>a.column.id}),t.accessor("initDate",{header:()=>"Fecha de ingreso",cell:a=>n(a.getValue()).format("DD/MM/YYYY"),footer:a=>a.column.id}),t.accessor("endDate",{header:()=>"Fecha de salida",cell:a=>n(a.getValue()).format("DD/MM/YYYY"),footer:a=>a.column.id})];return o||p?s.jsx(d,{}):s.jsxs("div",{children:[s.jsx(j,{columns:h,data:(e==null?void 0:e.results)||[],showDelete:!r,showUpdate:!r}),s.jsx(V,{}),s.jsx(M,{handleRemove:f})]})}export{T as default};
